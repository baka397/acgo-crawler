#!/bin/bash
# Node Settings
#########################setting####################
env=online
uid=crawler.acgo.club
appPath=/home/website/App/$uid
logPath=/home/website/Logs/$uid
#########################env setting####################
export NODE_TASK_PERIOD=$1
export NODE_ENV=$env
export APP_PATH=$appPath
export LOG_PATH=$logPath
#########################init####################
init() {
    node $appPath/init.js
}
#########################starting####################
start() {
  echo start begin
    pm2 start $appPath/timer.js -n $uid -l $logPath/log.log -e $logPath/error.log
  echo start end
}
#########################starting with day####################
day() {
    export NODE_TASK_PERIOD=$1
    node $appPath/bin/start
}

case "$1" in
    day)
        $(day $2)
        ;;
    start)
        start
        ;;
    init)
        init
        ;;
    ?|help)
        echo $"Usage: $0 {day|init|start|help|?}"
        ;;
    *)
        echo $"Usage: $0 {help|?}"
esac